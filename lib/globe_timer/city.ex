defmodule GlobeTimer.City do
  use Ecto.Schema
  import Ecto.Changeset

  schema "cities" do
    field :name, :string
    field :timezone, :string

    timestamps()
  end

  @doc false
  def changeset(city, attrs) do
    city
    |> cast(attrs, [:name, :timezone])
    |> validate_required([:name, :timezone])
    |> validate_inclusion(:timezone, timezone_abbreviations())
  end

  defp timezone_abbreviations do
    [
      "ACDT",
      "ACST",
      "ACT",
      "ADT",
      "AEDT",
      "AEST",
      "AFT",
      "AKDT",
      "AKST",
      "ALMT",
      "AMST",
      "AMT",
      "ANAST",
      "ANAT",
      "AQTT",
      "ART",
      "AST",
      "AT",
      "AWDT",
      "AWST",
      "AZOST",
      "AZOT",
      "AZT",
      "BNT",
      "BOT",
      "BRST",
      "BRT",
      "BST",
      "BTT",
      "CAST",
      "CAT",
      "CDT",
      "CEST",
      "CET",
      "CHADT",
      "CHAST",
      "CHOT",
      "CHST",
      "CHUT",
      "CIST",
      "CIT",
      "CKT",
      "CLST",
      "CLT",
      "COST",
      "COT",
      "CST",
      "CT",
      "CVT",
      "CWST",
      "CXT",
      "DAVT",
      "DDUT",
      "DFT",
      "EASST",
      "EAST",
      "EAT",
      "ECT",
      "EDT",
      "EEST",
      "EET",
      "EGST",
      "EGT",
      "EIT",
      "EST",
      "ET",
      "FET",
      "FJT",
      "FKST",
      "FKT",
      "FNT",
      "GALT",
      "GAMT",
      "GET",
      "GFT",
      "GILT",
      "GIT",
      "GMT",
      "GST",
      "GYT",
      "HDT",
      "HAEC",
      "HST",
      "HKT",
      "HOVST",
      "HOVT",
      "ICT",
      "IDT",
      "IOT",
      "IRDT",
      "IRKT",
      "IRST",
      "IST",
      "JST",
      "KALT",
      "KGT",
      "KOST",
      "KRAT",
      "KST",
      "KUYT",
      "LHDT",
      "LHST",
      "LINT",
      "MAGT",
      "MART",
      "MAWT",
      "MDT",
      "MET",
      "MEST",
      "MHT",
      "MIST",
      "MIT",
      "MMT",
      "MSK",
      "MST",
      "MUT",
      "MVT",
      "MYT",
      "NCT",
      "NDT",
      "NFT",
      "NOVT",
      "NPT",
      "NST",
      "NT",
      "NUT",
      "NZDT",
      "NZST",
      "OMST",
      "ORAT",
      "PDT",
      "PET",
      "PETT",
      "PGT",
      "PHOT",
      "PHT",
      "PKT",
      "PMDT",
      "PMST",
      "PONT",
      "PST",
      "PT",
      "PWT",
      "PYST",
      "PYT",
      "QYZT",
      "RET",
      "ROTT",
      "SAKT",
      "SAMT",
      "SAST",
      "SBT",
      "SCT",
      "SDT",
      "SGT",
      "SLST",
      "SRET",
      "SRT",
      "SST",
      "SYOT",
      "TAHT",
      "TFT",
      "TJT",
      "TKT",
      "TLT",
      "TMT",
      "TRT",
      "TOT",
      "TVT",
      "ULAST",
      "ULAT",
      "UTC",
      "UYST",
      "UYT",
      "UZT",
      "VET",
      "VLAT",
      "VOLT",
      "VOST",
      "VUT",
      "WAKT",
      "WAST",
      "WAT",
      "WEST",
      "WET",
      "WIT",
      "WST",
      "YAKT",
      "YEKT"
    ]
  end
end
